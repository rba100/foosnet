<!--
// Author:   Murray Foxcroft - April 2009
// Comments: The primary WPF window that launches on startup 
-->
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:foosNet="clr-namespace:FoosNet"
    xmlns:converters="clr-namespace:FoosNet"
    x:Class="FoosNet.MainNotifyWindow" x:Name="uiMainNotifyWindow"
    Title="" Height="350" Width="250"
    ShowInTaskbar="False"
    WindowStyle="None" 
    AllowsTransparency="True" 
    ResizeMode="NoResize"
    Background="Transparent"
    MouseEnter="uiWindowMainNotification_MouseEnter"
    MouseLeave="uiWindowMainNotification_MouseLeave" 
    Visibility="Visible" 
    Topmost="True" 
    BorderThickness="1" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:dragDrop="clr-namespace:GongSolutions.Wpf.DragDrop;assembly=GongSolutions.Wpf.DragDrop"
    mc:Ignorable="d">
    <Window.DataContext>
        <foosNet:NotifyWindowViewModel></foosNet:NotifyWindowViewModel>
    </Window.DataContext>
    <Window.Resources>
        <Storyboard x:Key="gridFadeInStoryBoard">
            <DoubleAnimation Storyboard.TargetName="uiGridMain" BeginTime="0:0:0.1"
                Storyboard.TargetProperty="Opacity" From="0.00" To="1.00" AutoReverse="False" Duration="0:0:0.3" />
        </Storyboard>
        <Storyboard x:Key="gridFadeOutStoryBoard">
            <DoubleAnimation Storyboard.TargetName="uiGridMain" BeginTime="0:0:0.5"
                Storyboard.TargetProperty="Opacity" From="1.00" To="0.00" AutoReverse="False" Duration="0:0:0.3" />
        </Storyboard>
        <converters:ConvertStatus x:Key="StatusConverter"/>
    </Window.Resources>
    <Border CornerRadius="5">
        <Grid x:Name="uiGridMain" Margin="10">
            <Border Width="Auto" Height="Auto"  Style="{StaticResource MainGridBorder}">
            </Border>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="27"/>
                    <RowDefinition Height="70"/>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="44"/>
                </Grid.RowDefinitions>

                <Label Margin="0" x:Name="TitleLabel" Foreground="White" Opacity="0.9" Content="Foos.Net"/>
                <Grid Grid.Row="0" Margin="5,0,12,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="0"/>
                        <RowDefinition Height="18" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="36" />
                        <ColumnDefinition Width="42" />
                    </Grid.ColumnDefinitions>
                    <foosNet:SlickToggleButton CornerRadius="0,0,0,4"   x:Name="PinButton" Style="{StaticResource SlickButton}" HighlightBackground="Gray" PressedBackground="DarkBlue" Grid.Column="1" Grid.Row="1" FontWeight="Bold" Click="PinButton_Click">
                        <Image x:Name="PinImage" Source="pack://application:,,/Images/Un-Pinned.png" Stretch="None"/>
                    </foosNet:SlickToggleButton>
                    <foosNet:SlickToggleButton CornerRadius="0,0,4,0" x:Name="CloseButton" Style="{StaticResource SlickButton}" HighlightBackground="Gray" Content="X" Click="CloseButton_Click" Grid.Row="1" FontWeight="Bold" Foreground="#FFFFFFFF" Grid.Column="2" />
                </Grid>

                <StackPanel Grid.Row="1" Margin="10,10,10,10">
                    <Image Margin="5,0">
                        <Image.Style>
                            <Style TargetType="{x:Type Image}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsTableFree}" Value="false">
                                        <Setter Property="Source" Value="Images/TableFree.png"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsTableFree}" Value="true">
                                        <Setter Property="Source" Value="Images/TableFree.png"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Image.Style>
                    </Image>
                </StackPanel>

            <Grid Grid.Row="2" Margin="10,0,10,10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Label FontWeight="Bold">Contacts</Label>
                <Grid Grid.Row="1">
                    <ListView Name="FoosPlayersList" 
                                  ItemsSource="{Binding FoosPlayers}" 
                                  Grid.Column="0" 
                                  dragDrop:DragDrop.IsDragSource="True"
                                  dragDrop:DragDrop.IsDropTarget="True">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Image Width="16" Height="16" Margin="5,0" Source="{Binding Status, Converter = {StaticResource StatusConverter}}"></Image>
                                    <TextBlock Margin="5,1,5,1" Text="{Binding Name}"></TextBlock>
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                        <ListView.ContextMenu>
                            <ContextMenu Name="PlayerListContextMenu">
                                <MenuItem Header="Remove">
                                    <MenuItem.Icon>
                                        <Image Width="16" Height="16" Source="/Foosnet;component/Images/delete.png"></Image>
                                    </MenuItem.Icon>
                                </MenuItem>
                            </ContextMenu>
                        </ListView.ContextMenu>
                    </ListView>
                </Grid>
            </Grid>
            <StackPanel FlowDirection="RightToLeft" Orientation="Horizontal" Margin="5,0,5,0" Grid.Row="3">
                <Button HorizontalAlignment="Stretch" Margin="5">Start new game</Button>
            </StackPanel>
        </Grid>
        </Grid>
    </Border>
</Window>
